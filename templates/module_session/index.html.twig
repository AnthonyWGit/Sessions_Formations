{% extends 'base.html.twig' %}

{% block title %}Hello ModuleSessionController!{% endblock %}

{% block body %}
    <h1>Liste des modules disponibles</h1>
    <p>
        Note: dans la version de l'intranet actuelle, il faut d'abord cliquer sur "Réinitialiser la durée pour supprimer un module". Si le bouton "programmer un module apparaît", alors le module peut être supprimé.
    </p>
    <div class="topPage">
        {% if is_granted('ROLE_ADMIN') %}
            <a class="looksLikeAButton" href="{{ path("newModuleSession") }}">
                Nouveau module
            </a>
        {% endif %}
    </div>
    <div class="cardBoard">
        {% for module in modulesSession %}
        <div class="cardBig">
            {{ module.nom }} | {{ module.categorie }}.
            <p>Module non programmé</p>
        </div>
            {% for programme in module.programmes %}
                <div class="cardBig">
                    {{ module.nom }} | {{ module.categorie }}.
                        <p>Durée du module : {{ programme.nbJours }} jours.</p>
                        <p>Module en cours dans {{ programme.session }}.</p>
                        {% if is_granted('ROLE_ADMIN') %}
                            <a class="looksLikeAButton" href="{{ path("editProgramme", {'id' : programme.id}) }}">Reprogrammer le module.</a>
                            <a href="{{ path("deleteProgramme", {'id' : programme.id}) }}" class="looksLikeAButton">Réinitialiser le module.</a>
                        {% endif %}
                </div>
            {% endfor %}
        {% endfor %}
    </div>
{% endblock %}
