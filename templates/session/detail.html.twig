{% extends 'base.html.twig' %}

{% block title %}Hello SessionController!{% endblock %}

{% block body %}
    <h1>Caractérisque de la seesion : {{ session.titre }} </h1>
    <p>Nom du référant formateur : {{ session.formateur.nom }} {{ session.formateur.prenom }} </p>
    <p>Contenu de la formation : {{ session.formation.intitule }} </p>
    <p>Modules concernées : 
        {% for prog in session.programmes %} 
            {{ prog.moduleSession.nom }}
        {% endfor %}
    </p>
    <p>La session démarre le : {{ session.dateSessionDebutFormat }} </p>
    <p>La session se termine le : {{ session.dateSessionFinFormat }}</p>

    {% set  currentDate = "now"|date("Y-m-d") %}
    {% if currentDate > session.dateSessionFinFormat %} {# below cases to display when a session is open or closed #}
        <p>Cette session est terminée</p>
    {% elseif currentDate < session.dateSessionFinFormat  %}
        <p>Cette session est ouverte</p>
    {% else %}
        <p>Cette session est terminée</p>
    {% endif %}

    {% if session.dateSessionFinFormat > currentDate %}
        <p>Voici les stagiaires qui se sont inscrits à la session</p>
        <ul>
            {% for stagiaire in session.stagiaires %}
                <li> <a href=" {{ path("detailStagiaire" , {'id' : stagiaire.id }) }}">{{stagiaire}}</a></li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Voici les stagiaires qui étaient inscrits à la session</p>
        <ul>
            {% for stagiaire in session.stagiaires %}
                <li> <a href=" {{ path("detailStagiaire" , {'id' : stagiaire.id }) }}">{{stagiaire}}</a></li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock %}
